extends ../../layouts/auth.pug
include ../../mixins/alert.pug


block main

    +alert-success(3000)
    +alert-fail(5000)

    .bg-white.w-full.max-w-md.p-8.rounded-lg.shadow-md
        // Sign up heading
        h2.text-3xl.font-bold.text-center.mb-8 Sign up
        // Form
        form.space-y-6(
            action='/user/register'
            method='POST'
            novalidate
            autocomplete='off'
        )
            // Email field
            .form-group
                label.block.text-sm.font-medium.text-gray-700(for='email') 
                    | Email Address
                    span.text-red-500.ml-1(aria-hidden='true') *
                .mt-1.relative
                    input#email.block.w-full.px-4.py-2.border.border-gray-300.rounded-lg.transition-colors(
                        type='email'
                        name='email'
                        placeholder='example@gmail.com'
                        required
                        aria-required='true'
                        pattern='^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
                        class='placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500'
                    )
                    span.hidden.text-sm.text-red-600.mt-1(role='alert') Please enter a valid email address

            // Full Name field  
            .form-group
                label.block.text-sm.font-medium.text-gray-700(for='full_name')
                    | Full Name
                    span.text-red-500.ml-1(aria-hidden='true') *
                .mt-1.relative
                    input#full_name.block.w-full.px-4.py-2.border.border-gray-300.rounded-lg.transition-colors(
                        type='text'
                        name='full_name'
                        placeholder='Enter your full name'
                        required
                        aria-required='true'
                        minlength='2'
                        class='placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500'
                    )
                    span.hidden.text-sm.text-red-600.mt-1(role='alert') Please enter your full name

            // Username field with auto-generate option
            .form-group
                label.block.text-sm.font-medium.text-gray-700(for='username')
                    | Username
                .space-y-2
                    .relative
                        input#username.block.w-full.px-4.py-2.border.border-gray-300.rounded-lg.transition-colors(
                            type='text'
                            name='username'
                            placeholder='Choose a username'
                            required
                            aria-required='true'
                            minlength='3'
                            class='placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 disabled:bg-gray-100 disabled:text-gray-500 disabled:cursor-not-allowed'
                        )
                        span.hidden.text-sm.text-red-600.mt-1(role='alert') Username must be at least 3 characters
            
                    .flex.items-center.space-x-2
                        input#auto-generate.h-4.w-4.text-cyan-600.transition-colors(
                            type='checkbox'
                            name='autoGenerate'
                            aria-label='Auto generate username'
                            onchange='document.getElementById("username").disabled = this.checked;'
                            class='rounded border-gray-300 focus:ring-cyan-500'
                        )
                        label.text-sm.text-gray-700(for='auto-generate') Auto generate username

            // Password field
            .form-group
                label.block.text-sm.font-medium.text-gray-700(for='password')
                    | Password
                    span.text-red-500.ml-1(aria-hidden='true') *
                .mt-1.relative
                    input#password.block.w-full.px-4.py-2.border.border-gray-300.rounded-lg.transition-colors(
                        type='password'
                        name='password'
                        placeholder='Must be at least 8 characters'
                        required
                        aria-required='true'
                        minlength='8'
                        class='placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500'
                    )
                    span.hidden.text-sm.text-red-600.mt-1(role='alert') Password must be at least 8 characters

            // Confirm Password field
            .form-group
                label.block.text-sm.font-medium.text-gray-700(for='confirm-password')
                    | Confirm Password
                    span.text-red-500.ml-1(aria-hidden='true') *
                .mt-1.relative
                    input#confirm-password.block.w-full.px-4.py-2.border.border-gray-300.rounded-lg.transition-colors(
                        type='password'
                        name='confirm_password'
                        placeholder='Re-enter your password'
                        required
                        aria-required='true'
                        minlength='8'
                        class='placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500'
                    )
                    span.hidden.text-sm.text-red-600.mt-1(role='alert') Passwords must match

            // Submit Button
            button.w-full.py-3.px-4.flex.justify-center.items-center.bg-cyan-600.text-white.font-medium.rounded-lg.transition-colors(
                type='submit'
                class='hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500'
            )
                | Create Account
        // Already have an account
        p.text-center.text-sm.text-gray-500.mt-6
            | Already have an account? 
            a.text-black.font-medium(href='/user/login') Log in

